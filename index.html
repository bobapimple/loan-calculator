<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ù–µ—Å–∏–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>

  <!-- üåó Theme toggle button -->
  <button id="themeToggle" class="theme-toggle">
    <i class="fas fa-moon"></i>
  </button>

  <div class="container fade-in">
    <div class="card slide-up">
      <h2><i class="fas fa-calculator"></i> –ù–µ—Å–∏–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</h2>

      <label><i class="fas fa-money-bill-wave"></i> –ù–µ—Å–∏–µ —Å–æ–º–∞—Å—ã (‚Ç∏)</label>
      <input type="number" id="loanAmount" value="1000000" />

      <label><i class="fas fa-percent"></i> –ñ—ã–ª–¥—ã“õ –ø–∞–π—ã–∑ (%)</label>
      <input type="number" id="interestRate" value="20" />

      <label><i class="fas fa-clock"></i> –ú–µ—Ä–∑—ñ–º (–∞–π)</label>
      <input type="number" id="months" value="12" />

      <label><i class="fas fa-wallet"></i> –ê–π–ª—ã“õ —Ç–∞–±—ã—Å (‚Ç∏)</label>
      <input type="number" id="income" value="500000" />

      <label><i class="fas fa-receipt"></i> –ê–π–ª—ã“õ —à—ã“ì—ã–Ω (‚Ç∏)</label>
      <input type="number" id="expenses" value="200000" />

      <button onclick="calculateLoan()"><i class="fas fa-equals"></i> –ï—Å–µ–ø—Ç–µ—É</button>
    </div>

    <div id="resultContainer" class="card result-card bounce-in" style="display: none;">
      <h3><i class="fas fa-chart-line"></i> –ù”ô—Ç–∏–∂–µ:</h3>
      <div class="result" id="resultText"></div>
    </div>
  </div>

  <script>
    function calculateLoan() {
      const P = parseFloat(document.getElementById('loanAmount').value);
      const i = parseFloat(document.getElementById('interestRate').value) / 100 / 12;
      const n = parseInt(document.getElementById('months').value);
      const income = parseFloat(document.getElementById('income').value);
      const expenses = parseFloat(document.getElementById('expenses').value);

      const A = P * (i * Math.pow(1 + i, n)) / (Math.pow(1 + i, n) - 1);
      const totalPaid = A * n;
      const overpaid = totalPaid - P;

      let advice = "";
      if (A > income / 2) {
        advice += "üí° –ê–π —Å–∞–π—ã–Ω“ì—ã —Ç”©–ª–µ–º —Ç–∞–±—ã—Å—ã“£—ã–∑–¥—ã“£ –∂–∞—Ä—Ç—ã—Å—ã–Ω–∞–Ω –∫”©–ø. “ö—ã—Å“õ–∞ –º–µ—Ä–∑—ñ–º–Ω–µ–Ω –∞—É–ª–∞“õ –±–æ–ª—ã“£—ã–∑. ";
      }
      if ((overpaid / P) > 0.3) {
        advice += "üìâ –ü–∞–π—ã–∑–¥—ã“õ –∞—Ä—Ç—ã“õ —Ç”©–ª–µ–º –∂–æ“ì–∞—Ä—ã. –ë–∞—Å“õ–∞ “±—Å—ã–Ω—ã—Å—Ç–∞—Ä–¥—ã “õ–∞—Ä–∞—Å—Ç—ã—Ä“ì–∞–Ω –∂”©–Ω.";
      }
      if (advice === "") {
        advice = "‚úÖ –ù–µ—Å–∏–µ–ª—ñ–∫ —à–∞—Ä—Ç—Ç–∞—Ä —Å—ñ–∑–¥—ñ“£ —Ç–∞–±—ã—Å—ã“£—ã–∑“ì–∞ —Å”ô–π–∫–µ—Å –∫–µ–ª–µ–¥—ñ.";
      }

      document.getElementById('resultText').innerHTML = `
        <p>üìÜ –ê–π —Å–∞–π—ã–Ω“ì—ã —Ç”©–ª–µ–º: <strong>${A.toFixed(2)} ‚Ç∏</strong></p>
        <p>üíµ –ñ–∞–ª–ø—ã —Ç”©–ª–µ–Ω–µ—Ç—ñ–Ω —Å–æ–º–∞: <strong>${totalPaid.toFixed(2)} ‚Ç∏</strong></p>
        <p>üìà –ê—Ä—Ç—ã“õ —Ç”©–ª–µ–º (–ø–∞–π—ã–∑): <strong>${overpaid.toFixed(2)} ‚Ç∏</strong></p>
        <div class="advice">üß† –ö–µ“£–µ—Å: ${advice}</div>
      `;
      document.getElementById('resultContainer').style.display = 'block';
    }

    // üåô Theme toggle logic
    const toggle = document.getElementById('themeToggle');
    const root = document.documentElement;

    function setTheme(theme) {
      root.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      toggle.innerHTML = theme === 'dark'
        ? '<i class="fas fa-sun"></i>'
        : '<i class="fas fa-moon"></i>';
    }

    toggle.addEventListener('click', () => {
      const current = root.getAttribute('data-theme');
      setTheme(current === 'dark' ? 'light' : 'dark');
    });

    // Initial load
    const saved = localStorage.getItem('theme') || 'light';
    setTheme(saved);
  </script>

</body>
</html>
